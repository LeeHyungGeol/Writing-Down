# 코드 다듬기

# 💡 주석의 양면성

## ⚡️ 주석은 죄악이다! vs 주석 좀 남기자!

> 주석이 많다는 것은 그만큼 비즈니스 요구사항을 코드에 잘 표현하지 못했다.

> 코드를 설명하는 주석을 쓰면, 코드가 아닌 주석 설명에 의존하게 된다.
- 주석에 의존하여 코드를 작성하면, 적절하지 않은 추상화 레벨을 갖게 되어 낮은 품질의 코드가 만들어진다.

## ⚡️ 그럼 주석은 언제 쓰나?

## ⚡️ 좋은 주석

> 후대에 전해야 할 `의사 결정의 히스토리` 왜 이런 정책을 갖게 되었고, 왜 이런 히스토리를 갖게 되었는지를 코드로 설명할 수 없을 떄
> 
> **주석**을 사용한다.

```java
/**
 * 이 객체가 가진 정책은,
 * A 정책과 B 정책중, AB 테스트와 기술 회의를 통해 결정된 사항을 기반으로 선택되어 작성된 것이다.
 * 관련 문서: https://docs.google.com/document/d/1
 */
public class ImportantPolicy { }
```

- 주석을 작성할 때, 자주 변하는 정보는 최대한 지양해서 작성한다.
- 주석도 코드처럼 같이 관리해줘야 한다. 지속적인 업데이트가 필요하다.
- 주석이 아예 없는 것 보다, 부정확한 정보를 갖고 있는 주석이 더 최악이다.

> 💡 **먼저, 우리가 가진 모든 표현 방법을 통해 코드를 통해 의도들을 잘 작성하고, 그럼에도 불구히고 코드에 녹여내지 못하는 정보가 있다면 주석을 사용하자!** 

아래의 주석은 꼭 필요한 주석일까?

**AS-IS**

해당 주석은 게임의 상태값을 int 로 표시하고 있다. 하지만, 이것을 Enum 으로 표현하면 주석을 사용하지 않고도 의도를 더 명확하게 표현할 수 있다.

```java
private int gameStatus = 0; // 0: 게임 중, 1: 승리, -1: 패배
```

**TO-BE**

```java
public enum GameStatus {
	IN_PROGRESS("진행 중"),
	WIN("승리"),
	LOSE("패배")
	;

	private final String description;

	GameStatus(String description) {
		this.description = description;
	}
}
```

#### GameStatus 를 만들면서 Minesweeper 의 역할과 GameBoard 의 역할을 좀 더 확실하게 분리시켰다.

- `GameBoard` 는 실제 게임 진행에 대한 것들을 모두 담당한다.
  - 실제적인 지뢰 찾기의 도메인 로직을 모두 관리한다.
- `MineSweeper` 는 외부 세계와의 접점, 컨트롤러의 역할을 하는 것이다.
  - 게임을 실행하고 여러가지 입/출력들을 중간에서 담당하여 전달해준다.

### MVC 구조처럼 돌아가는 것을 볼 수 있다.