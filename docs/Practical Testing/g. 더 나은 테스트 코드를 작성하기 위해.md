# 더 나은 테스트 코드를 작성하기 위해

# 💡 한 문단에 한 주제!

- 분기문, 반복문이 테스트 코드에 들어간다는 것 자체가 한 문단에 두 가지 이상의 내용이 들어가 있다는 뜻이다.

> **분기문, 반복문과 같은 논리 구조가 테스트 코드에 포함되면 테스트 코드가 지향하는 무엇을 테스트하고자 하는지 어떤 환경을 구성하고자 하는지에 대한 것들을 방해하게 된다!** 
- 만약에 이런 **Case 확장**이 필요하다면 `@ParameterizedTest` 를 사용하자.
- `@DisplayName` 을 한 문장으로 치환해서 사용할 수 있는가로 판단해봐도 좋을 것이다!

분기문, 반복문 요런 것들을 지양하는 것이 좋다.

# 💡 완벽하게 제어하기

> **`현재 시간`, `랜덤 값`, `외부 API 호출` 등과 같이 같이 내가 제어할 수 없는 값들은 (가능하다면) 메서드 파라미터로 분리하여 외부로부터 주입하도록 하고, 테스트 시에는 제어할 수 있는 시간값을 주입하여 테스트하자!**

- **제어할 수 없는 값을 분리하여 상위 계층으로 올리고, 그에 따라 하위 계층을 테스트에 유연한 구조로 만들자!**
- 다만, 이 제어할 수 없는 값을 분리하여 상위 계층으로 올리는 설계가, 무조건 최상단 계층까지 올려야 한다는 의미는 아니다!
- 어느 계층까지 분리하여도 비즈니스 로직의 맥락이 깨지지 않는지, 어느 수준까지 테스트 가능하도록 만들 것인지 고민이 필요하다!
- 보통 자연스러운 맥락 안에서는, Controller에서 현재 시간값을 생성하여 Service에 넘겨주도록 하거나, 가능하다면 아예 외부에서 요청이 들어올 때 시간값을 받도록 고민하며 설계한다!

