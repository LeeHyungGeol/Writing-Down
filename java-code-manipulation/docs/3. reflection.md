# 3.reflection<br/>## ëª©ì°¨- Spring Dependency Injection ì€ ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ?- Reflection API<br/><br/><br/># ğŸ’¡ Spring Dependency Injection ì€ ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ?```java@Repositorypublic class ReflectionRepository {}@Servicepublic class ReflectionService {    @Autowired ReflectionRepository reflectionRepository;}@SpringBootTestpublic class ReflectionServiceTest {    @Autowired    ReflectionService reflectionService;    @Test    void diTest() {        Assertions.assertThat(reflectionService).isNotNull();        Assertions.assertThat(reflectionService.reflectionRepository).isNotNull();    }}```- ìœ„ì˜ í…ŒìŠ¤íŠ¸ê°€ ì–´ë–»ê²Œ ì„±ê³µí• ê¹Œ?   - reflectionRepository ì¸ìŠ¤í„´ìŠ¤ëŠ” ì–´ë–»ê²Œ null ì´ ì•„ë‹ê¹Œ?  - Spring ì€ ì–´ë–»ê²Œ ReflectionService ì¸ìŠ¤í„´ìŠ¤ì— ReflectionRepository ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì£¼ì…í• ê¹Œ? - ë¹„ë°€ì€ `Reflection` ì— ìˆë‹¤.<br/><br/><br/># ğŸ’¡ Reflection API## âš¡ï¸ í´ë˜ìŠ¤ ì •ë³´ ì¡°íšŒ```javaclass ReflectionApiTest {    @Test    @DisplayName("1. Class<T>ì—_ì ‘ê·¼í•˜ëŠ” 3ê°€ì§€ ë°©ë²•")    void approachClass() throws ClassNotFoundException {        //1. ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•˜ê³  ë‚˜ë©´, Class<T> ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒê¸´ë‹¤. íƒ€ì….class í˜•íƒœë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.        Class<Sample> sampleClass1 = Sample.class;        //2. ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ëŠ” getClass() ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤. ì¸ìŠ¤í„´ìŠ¤.getClass() ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.        Sample sample = new Sample();        Class<? extends Sample> sampleClass2 = sample.getClass();        //3. í´ë˜ìŠ¤ full qualified class name ì¸ ë¬¸ìì—´ë¡œ ì½ì–´ì˜¤ëŠ” ë°©ë²• : Class.forName("Fully Qualified Class Name");        //- í´ë˜ìŠ¤ íŒ¨ìŠ¤ì— í•´ë‹¹ í´ë˜ìŠ¤ê°€ ì—†ë‹¤ë©´ ClassNotFoundException ë°œìƒí•œë‹¤.        Class<?> sampleClass3 = Class.forName("com.brothergeol.Sample");        System.out.println(sampleClass1);        System.out.println(sampleClass2);        System.out.println(sampleClass3);        //class com.brothergeol.Sample        //class com.brothergeol.Sample        //class com.brothergeol.Sample    }    @DisplayName("2. í•„ë“œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°")    @Test    void getFields() {        Class<Sample> sampleClass = Sample.class;        Arrays.stream(sampleClass.getFields()).forEach(System.out::println);   //public í•„ë“œë§Œ        System.out.println();        Arrays.stream(sampleClass.getDeclaredFields()).forEach(System.out::println);   //ëª¨ë“  í•„ë“œ        System.out.println();    }    @DisplayName("2-1. í•„ë“œ ê°’ ê°€ì ¸ì˜¤ê¸°")    @Test    void getFieldsValue() {        Class<Sample> sampleClass = Sample.class;        Sample Sample = new Sample();        Arrays.stream(sampleClass.getDeclaredFields()).forEach(f -> {            f.setAccessible(true);            System.out.println(f);            try {                System.out.println(f.get(Sample));  //instance ë¥¼ í†µí•´ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.            } catch (IllegalAccessException e) {                e.printStackTrace();            }        });//        private java.lang.String com.brothergeol.Sample.one//            one//        private static java.lang.String com.brothergeol.Sample.two//            two//        private static final java.lang.String com.brothergeol.Sample.three//            three//        public java.lang.String com.brothergeol.Sample.four//            four//        protected java.lang.String com.brothergeol.Sample.five//            five    }    @DisplayName("2-2. í•„ë“œ ì ‘ê·¼ì œì–´ì í™•ì¸í•˜ê¸°")    @Test    void getFieldsModifier() {        Class<Sample> sampleClass = Sample.class;        Sample Sample = new Sample();        Arrays.stream(sampleClass.getDeclaredFields()).forEach(f -> {            int modifiers = f.getModifiers();            System.out.println(f);            System.out.println(Modifier.isPrivate(modifiers));            System.out.println(Modifier.isPublic(modifiers));        });//        private java.lang.String com.brothergeol.Sample.one//        true//        false    }    @DisplayName("3. ë©”ì†Œë“œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°")    @Test    void getMethods() {        Class<Sample> SampleClass = Sample.class;        Arrays.stream(SampleClass.getMethods()).forEach(System.out::println);        System.out.println();        Arrays.stream(SampleClass.getDeclaredMethods()).forEach(System.out::println);        System.out.println();//        public void com.brothergeol.Sample.eight()//        public final void java.lang.Object.wait(long,int) throws java.lang.InterruptedException//        public final void java.lang.Object.wait() throws java.lang.InterruptedException//        public final native void java.lang.Object.wait(long) throws java.lang.InterruptedException//        public boolean java.lang.Object.equals(java.lang.Object)//        public java.lang.String java.lang.Object.toString()//        public native int java.lang.Object.hashCode()//        public final native java.lang.Class java.lang.Object.getClass()//        public final native void java.lang.Object.notify()//        public final native void java.lang.Object.notifyAll()////        private void com.brothergeol.Sample.six()//        protected void com.brothergeol.Sample.seven()//        public void com.brothergeol.Sample.eight()    }    @DisplayName("3-1. ë©”ì†Œë“œ ê´€ë ¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°")    @Test    void getMethodInfos() {        Class<Sample> SampleClass = Sample.class;        Arrays.stream(SampleClass.getDeclaredMethods()).forEach(f -> {            System.out.println(f);            Arrays.stream(f.getParameterTypes()).forEach(System.out::println);            System.out.println(f.getReturnType());        });//        private void com.brothergeol.Sample.six()//        void//        protected void com.brothergeol.Sample.seven()//        void//        public void com.brothergeol.Sample.eight()//        void    }    @DisplayName("4. ìƒìœ„ í´ë˜ìŠ¤ ê°€ì ¸ì˜¤ê¸°")    @Test    void getSuperClass() {        Class<Sample> SampleClass = Sample.class;        System.out.println(SampleClass.getSuperclass());        // class java.lang.Object    }    @DisplayName("5. ì¸í„°í˜ì´ìŠ¤ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°")    @Test    void getInterface() {        Arrays.stream(MySample.class.getInterfaces()).forEach(System.out::println);        //interface com.brothergeol.MyInterface    }    @DisplayName("6. ìƒì„±ì ê°€ì ¸ì˜¤ê¸°")    @Test    void getConstructor() {        Arrays.stream(Sample.class.getConstructors()).forEach(System.out::println);//        public com.brothergeol.Sample()//        public com.brothergeol.Sample(java.lang.String,java.lang.String,java.lang.String)    }```- Class APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬í”Œë ‰ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ### ğŸ”‹ Reflectionì„ ì‚¬ìš©í•˜ì—¬ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ì •ë³´- í´ë˜ìŠ¤ì˜ í•„ë“œ- ìƒìœ„í´ë˜ìŠ¤- ì¸í„°í˜ì´ìŠ¤- ë©”ì†Œë“œ ëª©ë¡ ë“± ..### ğŸ”‹ Reflection ì‚¬ìš©í•´ë³´ê¸°- Reflection ì„ ì‚¬ìš©í•˜ê¸° ì´ì „ ì°¸ì¡°í•  í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ë³´ì`Book, MySample, MyInterface````java// ê¸°ë³¸ì ìœ¼ë¡œ annotation ì€ ì£¼ì„(comment) ì™€ ê°™ë‹¤.@MyAnnotationpublic class Sample {  private String one = "one";  private static String two = "two";  private static final String three = "three";  public String four = "four";  // @MyAnnotation //@Target({ElementType.METHOD, ElementType.CONSTRUCTOR})  protected String five = "five";  public Sample() { }  public Sample(String one, String four, String five) {    this.one = one;    this.four = four;    this.five = five;  }  @MyAnnotation  private void six() {    System.out.println("six");  }  protected void seven() {    System.out.println("seven");  }  public void eight() {    System.out.println("eight");  }}public class MySample extends Sample implements MyInterface {}public interface MyInterface {}````Reflection ì‚¬ìš©í•˜ê¸°`### ğŸ”‹ Class ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ëŠ” ë°©ë²•- class ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ëŠ” ë°©ë²•ì€ 3ê°€ì§€ì´ë‹¤.- 1.Sample.class ì™€ ê°™ì´ í´ë˜ìŠ¤ ë¡œë“œì‹œ í™ì— ì €ì¥ë˜ëŠ” class ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ëŠ” ë°©ë²•- 2.íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ì˜ getClass() ë©”ì†Œë“œë¡œ ì°¸ì¡°í•˜ëŠ” ë°©ë²•- 3.FQCN (Fully Qualified Class Name) ì„ ì´ìš©í•´ Class.forName() ë©”ì†Œë“œë¡œ ì°¸ì¡°í•˜ëŠ” ë°©ë²•```java// Class ë¡œë”©ì´ ëë‚˜ë©´ classíƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ í™ì— ì €ì¥ë¨Class<Sample> sampleClass = Sample.class;// íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆë‹¤ë©´ getClass() ë¥¼ ì‚¬ìš©í•´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.Sample sample = new Sample();Class<? extends Sample> aClass = sample.getClass();// FQCN ìœ¼ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•¨Class<?> aClass1 = Class.forName("com.brothergeol.Sample");```### ğŸ”‹ íŠ¹ì • í´ë˜ìŠ¤ì˜ í•„ë“œ ì°¸ì¡°í•˜ê¸°- getFields() ë©”ì†Œë“œì™€ getDeclaredFields() ë©”ì†Œë“œë¥¼ í†µí•´ í´ë˜ìŠ¤ì˜ í•„ë“œì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.- ì´ë•Œ getFields() ë©”ì†Œë“œëŠ” public í•œ í•„ë“œì—ë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.```java// í´ë˜ìŠ¤ì˜ í•„ë“œë“¤ì— ì ‘ê·¼// ì´ ë©”ì†Œë“œëŠ” publicí•œ ê²ƒë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤Field[] fields = sampleClass.getFields();Arrays.stream(fields).forEach(System.out::println);// ëª¨ë“  í•„ë“œì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.Field[] declaredFields = sampleClass.getDeclaredFields();Arrays.stream(declaredFields).forEach(System.out::println);```### ğŸ”‹ íŠ¹ì • í´ë˜ìŠ¤ì˜ í•„ë“œê°’ ê°€ì ¸ì˜¤ê¸°- ì´ì „ê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ í•„ë“œì˜ ê°’ì„ ê°€ì ¸ì˜¬ìˆ˜ ìˆëŠ”ë° ì´ë•Œ í•´ë‹¹ í•„ë“œì˜ ì ‘ê·¼ì œì–´ìê°€ private ì´ë¼ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.- privateí•œ í•„ë“œì—ë„ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ setAccessible(true); ë¡œ ì„¤ì •ì„ í•´ì£¼ì–´ì•¼ í•œë‹¤.```java// í•„ë“œì˜ ê°’ì„ ê°€ì ¸ì˜¤ê¸°Arrays.stream(declaredFields).forEach(f -> {    try {        // private í•œ ë³€ìˆ˜ì˜ ê°’ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ì˜µì…˜        f.setAccessible(true);        System.out.printf("%s %s", f, f.get(sample));    } catch (IllegalAccessException e) {        e.printStackTrace();    }});```### ğŸ”‹ íŠ¹ì • í´ë˜ìŠ¤ì˜ ìƒì„±ìì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•- getDeclaredConstructors() ë©”ì†Œë“œë¡œ ìƒì„±ìì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.```java// ìƒì„±ìë“¤ ì ‘ê·¼Arrays.stream(sampleClass.getDeclaredConstructors()).forEach(System.out::println);```### ğŸ”‹ íŠ¹ì • í´ë˜ìŠ¤ì˜ ë¶€ëª¨í´ë˜ìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•- getSuperclass() ë©”ì†Œë“œë¡œ ë¶€ëª¨ í´ë˜ìŠ¤ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.- ì´ë•Œ ë¶€ëª¨í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— Class íƒ€ì…ìœ¼ë¡œ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.```java// ë¶€ëª¨í´ë˜ìŠ¤ ì ‘ê·¼Class<? super MySample> superclass = MySample.class.getSuperclass();System.out.println(superclass);```### ğŸ”‹ íŠ¹ì • í´ë˜ìŠ¤ì˜ ì¸í„°í˜ì´ìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•- getInterfaces() ë©”ì†Œë“œë¡œ ì¸í„°í˜ì´ìŠ¤ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.```java// ì¸í„°í˜ì´ìŠ¤ ì ‘ê·¼Arrays.stream(MySample.class.getInterfaces()).forEach(System.out::println);```## ì •ë¦¬- ì•ì—ì„œ ì‚´í´ë³¸ê²ƒ ì™¸ì—ë„ ë‹¤ì–‘í•œ í´ë˜ìŠ¤ ì •ë³´ê°€ ì°¸ì¡° ê°€ëŠ¥í•˜ë‹¤.- https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html<br/><br/><br/>## âš¡ï¸ Annotation Reflection```javapackage com.brothergeol;import com.brothergeol.MyAnnotation;import com.brothergeol.MySample;import com.brothergeol.Sample;import org.junit.jupiter.api.DisplayName;import org.junit.jupiter.api.Test;import java.lang.reflect.Modifier;import java.util.Arrays;class ReflectionApiTest {    @DisplayName("7. ì–´ë…¸í…Œì´ì…˜ ê°€ì ¸ì˜¤ê¸°")    @Test    void getAnnotation() {        // Annotation ì€ ê·¼ë³¸ì ìœ¼ë¡œ ì£¼ì„ ì·¨ê¸‰ì„ ë°›ê¸° ë•Œë¬¸ì— ì´ ì •ë³´ê°€ í´ë˜ìŠ¤ ê¹Œì§€ëŠ” ë‚¨ëŠ”ë‹¤. ì†ŒìŠ¤ì—ë„ ë‚¨ê³ , í´ë˜ìŠ¤ì—ë„ ë‚¨ëŠ”ë‹¤.        // ì´ í´ë˜ìŠ¤ë¥¼ ë°”ì´íŠ¸ì½”ë“œ(.class íŒŒì¼)ë¡œ ë©”ëª¨ë¦¬ì— ë¡œë”©í–ˆì„ ë•Œ, ì´ ì •ë³´ê°€ ë‚¨ì•„ìˆì§€ ì•ŠëŠ”ë‹¤.        // ëŸ°íƒ€ì„ê¹Œì§€ë„ ì´ ì–´ë…¸í…Œì´ì…˜ì„ ìœ ì§€í•˜ê³  ì‹¶ë‹¤ê³  í•˜ë©´, RetentionPolicy ë¥¼ RUNTIME ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.        // ì–´ë…¸í…Œì´ì…˜ì´ ìƒì†ë˜ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´, @Inherited ë¥¼ ë¶™ì—¬ì£¼ë©´ ëœë‹¤.        // getDeclaredAnnotations() ëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì— ë¶™ì–´ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ë§Œ ê°€ì ¸ì˜¨ë‹¤.        Arrays.stream(Sample.class.getAnnotations()).forEach(System.out::println);        System.out.println();        Arrays.stream(MySample.class.getAnnotations()).forEach(System.out::println);        System.out.println();        Arrays.stream(MySample.class.getDeclaredAnnotations()).forEach(System.out::println);        System.out.println();        Arrays.stream(Sample.class.getDeclaredFields()).forEach(f -> {            Arrays.stream(f.getAnnotations()).forEach(annotation -> {                if (annotation instanceof MyAnnotation) {                    MyAnnotation myAnnotation = (MyAnnotation) annotation;                    System.out.println(myAnnotation);                }            });        });        // @com.brothergeol.MyAnnotation()        // @com.brothergeol.MyAnnotation()    }    @DisplayName("7-1. ì–´ë…¸í…Œì´ì…˜ ëª©ë¡ ì¡°íšŒí•˜ê¸°")    @Test    void getAnnotationList() {        /**         * ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜ì€ java code, java byte code (class file)ê¹Œì§€ë„ ë‚¨ì•„ìˆì§€ë§Œ, runtime ê¹Œì§€ ë‚¨ì•„ìˆì§€ëŠ” ì•ŠëŠ”ë‹¤.         * ê·¸ë˜ì„œ getAnnotations() ì—ì„œëŠ” ì‚¬ìš©ì ì •ì˜ ì–´ë…¸í…Œì´ì…˜ì€ ì¡°íšŒë˜ì§€ ì•ŠëŠ”ë‹¤.         * ì¡°íšŒ ë°©ë²• : @Retention ì„¤ì •í•˜ê¸°         * */        Arrays.stream(Sample.class.getAnnotations()).forEach(System.out::println);//        @com.brothergeol.MyAnnotation()    }    @DisplayName("7-2. @Inherited ìƒì† í´ë˜ìŠ¤ì—ì„œ ìƒìœ„ í´ë˜ìŠ¤ ì–´ë…¸í…Œì´ì…˜ ì¡°íšŒ")    @Test    void getSuperClassAnnotation() {        Arrays.stream(MySample.class.getAnnotations()).forEach(System.out::println);//        @com.brothergeol.MyAnnotation()    }    @DisplayName("7-3. ìƒì†ë°›ì€ ì–´ë…¸í…Œì´ì…˜ê¹Œì§€ ì¡°íšŒí•˜ê¸°/í•˜ì§€ì•Šê¸°")    @Test    void getAnnotations() {        Arrays.stream(MySample.class.getAnnotations()).forEach(System.out::println);        System.out.println();//        @com.brothergeol.MyAnnotation()//        @com.brothergeol.SecondAnnotation()        Arrays.stream(MySample.class.getDeclaredAnnotations()).forEach(System.out::println);//        @com.brothergeol.SecondAnnotation()    }}```### ğŸ”‹ Annotationì• ë…¸í…Œì´ì…˜ì€ ë‹¤ì–‘í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ë©´ ì£¼ë¡œ **ë©”íƒ€ ë°ì´í„°**ì˜ ë¹„ì¤‘ì´ ê°€ì¥ í¬ë‹¤.>ë©”íƒ€ ë°ì´í„°(Meta-Data): ë°ì´í„°ë¥¼ ìœ„í•œ ë°ì´í„°, í•œ ë°ì´í„°ì— ëŒ€í•œ ì„¤ëª…ì„ ì˜ë¯¸í•œë‹¤`MyAnnotation````java@Retention(RetentionPolicy.RUNTIME)@Target({ElementType.TYPE, ElementType.FIELD})@Inheritedpublic @interface MyAnnotation {    String name() default "brothergeol";    int number() default 100;    String value() default "default value";}````@Retention`- ì»´íŒŒì¼ëŸ¬ê°€ ì• ë…¸í…Œì´ì…˜ì„ ë‹¤ë£¨ëŠ” ë°©ë²•ì„ ê¸°ìˆ í•˜ë©°, ì–´ëŠ ì‹œì ê¹Œì§€ ì •ë³´ë¥¼ ìœ ì§€í• ê²ƒì¸ì§€ ê²°ì •í•œë‹¤.- RetentionPolicy.SOURCE : ì»´íŒŒì¼ ì „ê¹Œì§€ë§Œ ìœ íš¨. (ì»´íŒŒì¼ ì´í›„ì—ëŠ” ì‚¬ë¼ì§)- RetentionPolicy.CLASS : ì»´íŒŒì¼ëŸ¬ê°€ í´ë˜ìŠ¤ë¥¼ ì°¸ì¡°í•  ë•Œê¹Œì§€ ìœ íš¨.- RetentionPolicy.RUNTIME : ì»´íŒŒì¼ ì´í›„ì—ë„ JVMì— ì˜í•´ ê³„ì† ì°¸ì¡°ê°€ ê°€ëŠ¥. (ë¦¬í”Œë ‰ì…˜ ì‚¬ìš©)- ê¸°ë³¸ê°’ì€ CLASS`@Target`- ì• ë…¸í…Œì´ì…˜ì„ ì ìš©í•  ìœ„ì¹˜ë¥¼ ê²°ì •í•œë‹¤.- ElementType.PACKAGE : íŒ¨í‚¤ì§€ ì„ ì–¸- ElementType.TYPE : íƒ€ì… ì„ ì–¸- ElementType.ANNOTATION_TYPE : ì–´ë…¸í…Œì´ì…˜ íƒ€ì… ì„ ì–¸- ElementType.CONSTRUCTOR : ìƒì„±ì ì„ ì–¸- ElementType.FIELD : ë©¤ë²„ ë³€ìˆ˜ ì„ ì–¸- ElementType.LOCAL_VARIABLE : ì§€ì—­ ë³€ìˆ˜ ì„ ì–¸- ElementType.METHOD : ë©”ì„œë“œ ì„ ì–¸- ElementType.PARAMETER : ì „ë‹¬ì¸ì ì„ ì–¸- ElementType.TYPE_PARAMETER : ì „ë‹¬ì¸ì íƒ€ì… ì„ ì–¸- ElementType.TYPE_USE : íƒ€ì… ì„ ì–¸`@Inherited`- ì• ë…¸í…Œì´ì…˜ì„ ìƒì†ì´ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.- ì• ë…¸í…Œì´ì…˜ì€ ê°’ë“¤ì„ ê°€ì§ˆìˆ˜ ìˆëŠ”ë° ê°€ì§ˆìˆ˜ ìˆëŠ” ë°ì´í„°ì˜ íƒ€ì…ì€ ì œí•œë˜ì–´ìˆë‹¤.- ê¸°ë³¸í˜• íƒ€ì…ê³¼, enum,  Wrapper íƒ€ì…ë“¤ë§Œ ì†ì„±ìœ¼ë¡œ ê°€ì§ˆìˆ˜ ìˆë‹¤.- í•´ë‹¹ ì†ì„±ì˜ ê¸°ë³¸ê°’ë„ ì§€ì •ì´ ê°€ëŠ¥í•˜ë‹¤.```javaString name() default "brothergeol";```ì†ì„±ì„ ì§€ì •í•˜ë©´ ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í• ë•Œ ë‹¤ìŒê³¼ ê°™ì´ ì†ì„±ì— ê°’ì„ ì§€ì •í• ìˆ˜ ìˆë‹¤.```java@MyAnnotation(name = "default value")```ë§Œì•½ **ê°’ì„ ë°›ì„ ì†ì„±ì˜ ì´ë¦„ì„ value ë¡œ ì§€ì •í•˜ë©´ ì†ì„±ëª…ì„ ìƒëµ**í•  ìˆ˜ ìˆë‹¤.```java@MyAnnotation("default value")```### ğŸ”‹ Reflectionìœ¼ë¡œ Annotation ì •ë³´ ì°¸ì¡°í•˜ê¸°ì• ë…¸í…Œì´ì…˜ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì£¼ì„ê³¼ ë™ì¼í•œ ì·¨ê¸‰ì„í•˜ê¸° ë•Œë¬¸ì— ë°”ì´íŠ¸ì½”ë“œ ë¡œë“œì‹œ í•´ë‹¹ ì• ë…¸í…Œì´ì…˜ì˜ ì •ë³´ëŠ” ì œì™¸í•˜ê³  ë¡œë“œëœë‹¤.- Reflectionìœ¼ë¡œ í•´ë‹¹ ì •ë³´ë¥¼ ì°¸ì¡° í•  ìˆ˜ ì—†ë‹¤.Reflectionìœ¼ë¡œ í•´ë‹¹ ì •ë³´ë¥¼ ì°¸ì¡°í•˜ê³  ì‹¶ë‹¤ë©´ (ì• ë…¸í…Œì´ì…˜ì˜ ì •ë³´ë¥¼ RUNTIMEì‹œ ê¹Œì§€ ìœ ì§€) @Retentionì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ì• ë…¸í…Œì´ì…˜ ì •ë³´ë¥¼ ì–¸ì œê¹Œì§€ ìœ ì§€í• ê²ƒì¸ì§€ ì§€ì •í•´ ì£¼ì–´ì•¼í•œë‹¤.getAnnoitations()- ìƒìœ„ í´ë˜ìŠ¤ì˜ ìƒì†ê°€ëŠ¥í•œ ì• ë…¸í…Œì´ì…˜ ì •ë³´ ê¹Œì§€ ì°¸ì¡°í•œë‹¤.getDeclaredAnnotations()- íƒ€ê²Ÿ í´ë˜ìŠ¤ì˜ ì• ë…¸í…Œì´ì…˜ ì •ë³´ë§Œ ì°¸ì¡°í•œë‹¤.```java// getAnnotations() : ìƒìœ„ í´ë˜ìŠ¤ì˜ ìƒì†ê°€ëŠ¥í•œ ì• ë…¸í…Œì´ì…˜ì •ë³´ê¹Œì§€ ê°€ì ¸ì˜¨ë‹¤.// getDeclaredAnnotations() : í˜„ì¬ í´ë˜ìŠ¤ì˜ ì• ë…¸í…Œì´ì…˜ ì •ë³´ë§Œ ê°€ì ¸ì˜¨ë‹¤.Arrays.stream(MySample.class.getAnnotations()).forEach(System.out::println);Arrays.stream(MySample.class.getDeclaredAnnotations()).forEach(System.out::println);```<br/><br/><br/>## âš¡ï¸ í´ë˜ìŠ¤ ì •ë³´ ìˆ˜ì •, ì¡°íšŒ```javaclass ClassModificationSampleTest {    @DisplayName("class instance ë§Œë“¤ê¸°")    @Test    void createInstance() throws InstantiationException, IllegalAccessException {        /**         * ì£¼ì˜ : ClassModification.class.newInstance(); ëŠ” Deprecated ë˜ì—ˆìœ¼ë¯€ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ í•œë‹¤.         * */        ClassModificationSample classModification = ClassModificationSample.class.newInstance();        System.out.println(classModification);      //com.brothergeol.ClassModificationSample@3e27ba32    }    @DisplayName("ìƒì„±ìë¡œ ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ê¸°")    @Test    void constructorInstance() throws ClassNotFoundException, NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException {        Class<?> clazz = Class.forName("com.brothergeol.ClassModificationSample");        Constructor<?> constructor = clazz.getConstructor(null);        ClassModificationSample classModification = (ClassModificationSample) constructor.newInstance();        System.out.println(classModification);      //com.brothergeol.ClassModificationSample@3e27ba32    }    @DisplayName("static í•„ë“œ ì ‘ê·¼í•˜ê¸°, ìˆ˜ì •í•˜ê¸°")    @Test    void editStaticFields() throws NoSuchFieldException, IllegalAccessException {        Field a = ClassModificationSample.class.getDeclaredField("A");        System.out.println(a.get(null));        //Static í•„ë“œë¥¼ ê°€ì ¸ì˜¬ ë•ŒëŠ” objectê°€ ì—†ì–´ë„ ë˜ë‹ˆê¹Œ null        a.set("A", "hey");        System.out.println(a.get(null));    }    @DisplayName("instance í•„ë“œ ì ‘ê·¼í•˜ê¸°, ìˆ˜ì •í•˜ê¸°")    @Test    void editInstanceFields() throws ClassNotFoundException, InvocationTargetException, InstantiationException, IllegalAccessException, NoSuchMethodException, NoSuchFieldException {        Class<?> aClass = Class.forName("com.brothergeol.ClassModificationSample");        Constructor<?> constructor = aClass.getConstructor(String.class);        ClassModificationSample instance = (ClassModificationSample) constructor.newInstance("input");        Field b = ClassModificationSample.class.getDeclaredField("b");        b.setAccessible(true);        System.out.println(b.get(instance));        b.set(instance, "output");     //set(instance, value);        System.out.println(b.get(instance));    }    @DisplayName("ë©”ì†Œë“œ ì‹¤í–‰í•˜ê¸° : Object Method.invoke(object, params)")    @Test    void methodExecution() throws NoSuchMethodException, ClassNotFoundException, InvocationTargetException, InstantiationException, IllegalAccessException {        Class<?> aClass = Class.forName("com.brothergeol.ClassModificationSample");        Constructor<?> constructor = aClass.getConstructor(String.class);        ClassModificationSample instance = (ClassModificationSample) constructor.newInstance("input");        Method c = ClassModificationSample.class.getDeclaredMethod("c");        c.setAccessible(true);        c.invoke(instance);        Method d = ClassModificationSample.class.getDeclaredMethod("sum", int.class, Integer.class);        System.out.println(d.invoke(instance, 1, 2));    }}```### ğŸ”‹ Reflection API ë¥¼ í™œìš©í•´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±í•˜ê¸°`ê¸°ë³¸ìƒì„±ìë¥¼ ê°€ì ¸ì™€ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±`- ê¸°ë³¸ìƒì„±ìë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì€ getConstructor ë©”ì†Œë“œì—ì„œ ì¸ìë¥¼ nullë¡œ ì§€ì •í•´ì£¼ì–´ ìƒì„±ìë¥¼ ê°€ì ¸ì˜¨ë‹¤.- ê°€ì ¸ì˜¨ ìƒì„±ìì˜ newInstance ë©”ì†Œë“œë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì¤€ë‹¤.```java// ê¸°ë³¸ìƒì„±ìë¥¼ ê°€ì ¸ì™€ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±Constructor<Sample> constructor = sampleClass.getConstructor(null);Sample sample = constructor.newInstance();````íŒŒë¼ë©”í„°ê°€ ì¡´ì¬í•˜ëŠ” ìƒì„±ìë¥¼ ê°€ì ¸ì™€ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±`- íŒŒë¼ë©”í„°ê°€ ì¡´ì¬í•˜ëŠ” ìƒì„±ìë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì€ getConstructor ë©”ì†Œë“œì—ì„œ ì¸ìë¥¼ Class type ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§€ì •í•´ì£¼ì–´ ìƒì„±ìë¥¼ ê°€ì ¸ì˜¨ë‹¤.- ê¸°ë³¸ ìƒì„±ìì™€ ë§ˆì°¬ê°€ì§€ë¡œ newInstance ë©”ì†Œë“œë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥´ ìƒì„±í•´ì¤€ë‹¤.```java// íŒŒë¼ë©”í„°ê°€ ì¡´ì¬í•˜ëŠ” ìƒì„±ìë¥¼ ê°€ì ¸ì™€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±Constructor<Sample> constructor1 = sampleClass.getConstructor(String.class);Sample hello = constructor1.newInstance("Hello");```### ğŸ”‹ Reflection API ë¥¼ í™œìš©í•´ í•„ë“œ ì •ë³´ ì°¸ì¡°í•˜ê¸°`static í•„ë“œ ì •ë³´ ì°¸ì¡°í•˜ê¸°`- getDeclaredFieldë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ í•„ë“œ ë©”íƒ€ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.- ê°€ì ¸ì˜¨ fieldì˜ get, set ë©”ì†Œë“œë¥¼ í™œìš©í•´ í•„ë“œì˜ ê°’ì„ ê°€ì ¸ì˜¤ê±°ë‚˜, ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.- ì´ë•Œ í•´ë‹¹ í•„ë“œê°€ static í•„ë“œê°€ ì•„ë‹ˆë¼ë©´, ì²«ë²ˆì§¸ ì¸ìë¡œ íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„˜ê²¨ì£¼ì–´ì•¼í•œë‹¤.```javaField a = Sample.class.getDeclaredField("A");// ê°’ì„ ê°€ì ¸ì˜¬ë•Œ í•´ë‹¹ í•„ë“œê°€ íŠ¹ì •í•œ ì¸ìŠ¤í„´ìŠ¤ì— í•´ë‹¹í•˜ëŠ” í•„ë“œë¼ë©´, ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë‹¤.// í•˜ì§€ë§Œ ì§€ê¸ˆì€ staticí•œ í•„ë“œì´ê¸° ë•Œë¬¸ì— nullì„ ë„˜ê²¨ì£¼ë©´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.a.get(null);// ë§ˆì°¬ê°€ì§€ë¡œ ì²«ë²ˆì§¸ì¸ìëŠ” íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤, ë‘ë²ˆì§¸ëŠ” ê°’ì„ ì§€ì •í•´ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.a.set(null, "BBBBB");````instance í•„ë“œ ì •ë³´ ì°¸ì¡°í•˜ê¸°`- static í•„ë“œì™€ ë§ˆì°¬ê°€ì§€ë¡œ getDeclaredFieldë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ í•„ë“œ ë©”íƒ€ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.- ê°€ì ¸ì˜¨ fieldì˜ get, set ë©”ì†Œë“œë¥¼ í™œìš©í•´ í•„ë“œì˜ ê°’ì„ ê°€ì ¸ì˜¤ê±°ë‚˜, ìˆ˜ì •í• ìˆ˜ ìˆìœ¼ë©° ì²«ë²ˆì§¸ ì¸ìë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„˜ê²¨ì£¼ì–´ì•¼ í•œë‹¤.```javaField b = Sample.class.getDeclaredField("B");// BëŠ” íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ì— í•´ë‹¹í•˜ëŠ” í•„ë“œì´ê¸° ë•Œë¬¸ì— book ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„˜ê²¨ì£¼ì–´ì•¼ í•œë‹¤.// private ë³€ìˆ˜ì´ê¸° ë•Œë¬¸ì— ì ‘ê·¼ì§€ì‹œìë¥¼ ë¬´ì‹œí•˜ê³  ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤.b.setAccessible(true);b.get(book1);b.set(book1, "CXCCCCCC");```### ğŸ”‹ Reflection API ë¥¼ í™œìš©í•´ ë©”ì†Œë“œ ì •ë³´ ì°¸ì¡°í•˜ê¸°`ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ë©”ì†Œë“œ ì •ë³´ ì°¸ì¡°í•˜ê¸°`- getDeclaredMethod ë©”ì†Œë“œë¥¼ í™œìš©í•´ ë©”ì†Œë“œ ì •ë³´ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.- invoke ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì—¬ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.- íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ë©”ì†Œë“œë¼ë©´ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„˜ê²¨ ì£¼ì–´ì•¼ í•œë‹¤.```javaMethod c = Sample.class.getDeclaredMethod("c");// íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ë©”ì†Œë“œë¼ë©´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„˜ê²¨ì£¼ì–´ì•¼í•œë‹¤.// private ë©”ì†Œë“œì´ê¸° ë–„ë¬¸ì— ì ‘ê·¼ì§€ì‹œìë¥¼ ë¬´ì‹œí•˜ê³  ì‹¤í–‰í•˜ë„ë¡ í•œë‹¤.c.setAccessible(true);c.invoke(book1);````ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” ë©”ì†Œë“œ ì •ë³´ ì°¸ì¡°í•˜ê¸°`- ì´ì „ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ getDeclaredMethod ë©”ì†Œë“œë¥¼ í™œìš©í•´ ë©”ì†Œë“œ ì •ë³´ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.  - ë©”ì†Œë“œ ì •ë³´ë¥¼ ì°¸ì¡°í• ë•Œ í•´ë‹¹ ë©”ì†Œë“œì˜ íŒŒë¼ë¯¸í„°ì˜ typeì€ ê¸°ë³¸í˜• íƒ€ì…ê³¼ Wrapper íƒ€ì…ì„ êµ¬ë¶„í•˜ê¸° ë–„ë¬¸ì— ì£¼ì˜í•´ì•¼í•œë‹¤.- invoke ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤```java// ë©”ì†Œë“œë¥¼ ê°€ì ¸ì˜¬ë•Œ Primitive type, Wrapper typeì„ êµ¬ë¶„í•˜ë¯€ë¡œ ì£¼ì˜í• ê²ƒMethod d = Sample.class.getDeclaredMethod("sum", int.class, Integer.class);int invoke = (int) d.invoke(book1, 1, 2);```<br/><br/><br/>